<!-- filepath: c:\Users\Anwender\.templates\Tabler\vergleich.html -->
<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.1.1
* @link https://tabler.io
* Copyright 2018-2025 The Tabler Authors
* Copyright 2018-2025 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quo-Vadis - Vergleich</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="./static/Favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./static/Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./static/Favicon/favicon-16x16.png">
    <link rel="manifest" href="./static/Favicon/site.webmanifest">
    <link rel="shortcut icon" href="./static/Favicon/favicon.ico">
    <!-- BEGIN STYLES -->
    <link href="./dist/css/tabler.min.css?1740918423" rel="stylesheet" />
    <!-- BEGIN CUSTOM STYLES -->
    <style>
      /* Reset and Base Styles */
      body {
        background: linear-gradient(180deg, #0d1b2a 0%, #1b263b 100%);
        font-family: 'Inter', sans-serif;
        color: #e0e7ff;
        overflow-x: hidden;
        margin: 0;
      }

      /* HUD Overlay */
      .hud-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: -1;
        background: rgba(13, 27, 42, 0.5);
      }

      .scan-lines {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(to bottom, rgba(255, 255, 255, 0.02) 50%, transparent 50%);
        background-size: 100% 4px;
        animation: scan 10s linear infinite;
      }

      .noise {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        opacity: 0.05;
        background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAAAAXNSR0IArs4c6QAAAEZQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBB4lAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAHGlET1QAAAACAAAAAAAAABMAAAAoAAAAEwAAABMAAADXa6TfAAAAVUlEQVQ4y+3SSQ4AIAwDwQ8C/f9vdkkZAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAMk/YB48oD5uAAAAAElFTkSuQmCC');
      }

      @keyframes scan {
        0% { transform: translateY(0); }
        100% { transform: translateY(-100%); }
      }

      /* Cards */
      .card {
        background: rgba(27, 38, 59, 0.85);
        border: 1px solid rgba(69, 162, 255, 0.3);
        border-radius: 12px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), inset 0 0 10px rgba(69, 162, 255, 0.1);
        backdrop-filter: blur(8px);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4), inset 0 0 15px rgba(69, 162, 255, 0.2);
      }

      .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(circle at 10% 10%, rgba(69, 162, 255, 0.2), transparent 50%);
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .card:hover::before {
        opacity: 1;
      }

      /* Table Styling */
      .table {
        color: #e0e7ff;
        background: rgba(27, 38, 59, 0.9);
      }

      .table th {
        background: rgba(69, 162, 255, 0.1);
        color: #45a2ff;
        text-transform: uppercase;
        font-weight: 600;
        border-bottom: 1px solid rgba(69, 162, 255, 0.2);
      }

      .table td {
        border-bottom: 1px solid rgba(69, 162, 255, 0.1);
        transition: background 0.3s ease;
      }

      .table tr:hover td {
        background: rgba(69, 162, 255, 0.05);
      }

      th[data-sort] {
        cursor: pointer;
        position: relative;
        transition: background 0.3s ease;
      }

      th[data-sort]:hover {
        background: rgba(69, 162, 255, 0.2);
      }

      th[data-sort]::after {
        content: "↕";
        margin-left: 5px;
        opacity: 0.5;
        color: #e0e7ff;
      }

      th[data-sort].sort-asc::after {
        content: "↑";
        opacity: 1;
      }

      th[data-sort].sort-desc::after {
        content: "↓";
        opacity: 1;
      }

      /* Buttons and Actions */
      .btn-primary {
        background: linear-gradient(45deg, #274f9d, #45a2ff);
        border: none;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .btn-primary:hover {
        transform: scale(1.05);
        box-shadow: 0 0 15px rgba(69, 162, 255, 0.5);
      }

      .btn-outline-primary {
        border-color: #45a2ff;
        color: #45a2ff;
      }

      .btn-outline-primary:hover {
        background: rgba(69, 162, 255, 0.2);
        color: #e0e7ff;
      }

      .btn-action {
        background: transparent;
        border: none;
        color: #e0e7ff;
      }

      .btn-action:hover {
        color: #45a2ff;
      }

      /* Dropdown */
      .dropdown-menu {
        background: rgba(27, 38, 59, 0.95);
        border: 1px solid rgba(69, 162, 255, 0.3);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      }

      .dropdown-item {
        color: #e0e7ff;
      }

      .dropdown-item:hover {
        background: rgba(69, 162, 255, 0.2);
        color: #45a2ff;
      }

      /* Inputs */
      .form-control {
        background: rgba(13, 27, 42, 0.9);
        border: 1px solid rgba(69, 162, 255, 0.3);
        color: #e0e7ff;
      }

      .form-control:focus {
        border-color: #45a2ff;
        box-shadow: 0 0 10px rgba(69, 162, 255, 0.5);
        background: rgba(13, 27, 42, 1);
      }

      .input-icon-addon {
        color: #45a2ff;
      }      /* Navbar */
      .navbar {
        background: rgba(13, 27, 42, 0.9);
        border-bottom: 1px solid rgba(69, 162, 255, 0.2);
        backdrop-filter: blur(10px);
      }

      .nav-link {
        color: #e0e7ff !important;
        transition: color 0.3s ease, transform 0.3s ease;
      }

      .nav-link:hover {
        color: #45a2ff !important;
        transform: scale(1.1);
      }      /* Active item highlight removed */
      .nav-item.active .nav-link {
        color: #e0e7ff !important;
        font-weight: normal;
        position: relative;
      }

      /* Removed the active nav item underline */
      
      /* Fix for dropdown being covered by other elements */
      .navbar-nav .nav-item.dropdown {
        position: relative !important;
        z-index: 9999 !important;
      }
      
      /* Fix for hero section potentially overlapping */
      .page-body {
        position: relative;
        z-index: 1;
      }
      
      /* Ensure navbar has higher z-index than page content */
      .navbar, 
      .navbar-collapse,
      .navbar-expand-md {
        position: relative;
        z-index: 9999 !important;
      }

      /* Pagination */
      .pagination .page-link {
        background: rgba(27, 38, 59, 0.9);
        border: 1px solid rgba(69, 162, 255, 0.3);
        color: #e0e7ff;
      }

      .pagination .page-item.active .page-link {
        background: #45a2ff;
        border-color: #45a2ff;
        color: #0d1b2a;
      }

      .pagination .page-link:hover {
        background: rgba(69, 162, 255, 0.2);
        color: #45a2ff;
      }

      /* Footer */
      .footer {
        background: rgba(13, 27, 42, 0.8);
        border-top: 1px solid rgba(69, 162, 255, 0.2);
      }

      .footer a {
        color: #45a2ff;
        transition: color 0.3s ease;
      }

      .footer a:hover {
        color: #84a6ff;
      }

      /* Modal */
      .modal-content {
        background: rgba(27, 38, 59, 0.95);
        border: 1px solid rgba(69, 162, 255, 0.3);
        border-radius: 12px;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      }

      .modal-header,
      .modal-footer {
        border-color: rgba(69, 162, 255, 0.2);
      }

      .modal-title,
      .form-label {
        color: #e0e7ff;
      }

      /* Animations */
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      .card,
      .nav-link,
      .table tr {
        animation: fadeIn 0.5s ease-out forwards;
      }

      .table tr:nth-child(1) { animation-delay: 0.1s; }
      .table tr:nth-child(2) { animation-delay: 0.2s; }
      .table tr:nth-child(3) { animation-delay: 0.3s; }
      .table tr:nth-child(4) { animation-delay: 0.4s; }
      .table tr:nth-child(5) { animation-delay: 0.5s; }
      .table tr:nth-child(6) { animation-delay: 0.6s; }

      /* Loader */
      @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      .table-loader {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        display: none;
      }

      .table-loader div {
        width: 40px;
        height: 40px;
        border: 4px solid #45a2ff;
        border-top: 4px solid transparent;
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      /* Ripple Effect */
      .ripple {
        position: absolute;
        background: rgba(69, 162, 255, 0.3);
        border-radius: 50%;
        transform: scale(0);
        animation: ripple 0.6s linear;
        pointer-events: none;
      }

      @keyframes ripple {
        to {
          transform: scale(4);
          opacity: 0;
        }
      }

      /* Font Import */
      @import url('https://fonts.googleapis.com/css2?family=Exo+2:wght@400;600;700&display=swap');
    </style>
    <!-- END CUSTOM STYLES -->
  </head>
  <body>
    <!-- HUD Overlay -->
    <div class="hud-overlay">
      <div class="scan-lines"></div>
      <div class="noise"></div>
    </div>
    <script src="./preview/js/demo-theme.min.js?1740918423"></script>
    <div class="page">
      <!-- BEGIN NAVBAR -->
      <header class="navbar navbar-expand-md d-print-none">
        <div class="container-xl">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="navbar-nav flex-row order-md-last">
            <div class="d-none d-md-flex">
              <a href="#" class="nav-link px-0 hide-theme-dark" title="Enable dark mode" data-bs-toggle="tooltip" data-bs-placement="bottom" id="darkModeToggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
                </svg>
              </a>
              <a href="#" class="nav-link px-0 hide-theme-light" title="Enable light mode" data-bs-toggle="tooltip" data-bs-placement="bottom" id="lightModeToggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                  <circle cx="12" cy="12" r="4" />
                  <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
                </svg>
              </a>
            </div>
          </div>
        </div>
      </header>      <header class="navbar-expand-md">
        <div class="collapse navbar-collapse" id="navbar-menu">
          <div class="navbar">
            <div class="container-xl">
              <div class="row flex-fill align-items-center">
                <div class="col">
                  <ul class="navbar-nav">
                    <li class="nav-item">
                      <a class="nav-link" href="./uebersicht.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 12L12 3L21 12V20C21 21.1 20.1 22 19 22H5C3.9 22 3 21.1 3 20V12Z"/>
                            <path d="M9 22V14H15V22"/>
                          </svg>
                        </span>
                        <span class="nav-link-title"> Übersicht </span>
                      </a>
                    </li>
                    <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" data-bs-auto-close="outside" role="button" aria-expanded="false">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Spieler </span>
                      </a>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" href="./finley.html">
                          Finley
                        </a>
                        <a class="dropdown-item" href="./bent.html">
                          Bent
                        </a>
                        <a class="dropdown-item" href="./ben.html">
                          Ben
                        </a>
                        <a class="dropdown-item" href="./alex.html">
                          Alex
                        </a>
                        <a class="dropdown-item" href="./lion.html">
                          Lion
                        </a>
                      </div>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="./daten.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z" />
                            <path d="M5 12h14" />
                            <path d="M12 5v14" />
                            <path d="M8 8v.01" />
                            <path d="M16 16v.01" />
                            <path d="M16 8v.01" />
                            <path d="M8 16v.01" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Daten </span>
                      </a>
                    </li>
                    <li class="nav-item active">
                      <a class="nav-link" href="./vergleich.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M5 9l4 0l0 -4" />
                            <path d="M3 3l6 6" />
                            <path d="M19 9l-4 0l0 -4" />
                            <path d="M21 3l-6 6" />
                            <path d="M5 15l4 0l0 4" />
                            <path d="M3 21l6 -6" />
                            <path d="M19 15l-4 0l0 4" />
                            <path d="M21 21l-6 -6" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Vergleich </span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- END NAVBAR -->
      <div class="page-wrapper">
        <!-- BEGIN PAGE HEADER -->
        <div class="page-header d-print-none py-2">
          <div class="container-xl">
            <div class="row align-items-center">
              <div class="col">
                <h2 class="page-title">Spielervergleich</h2>
                <div class="text-secondary mt-1">
                  <span>Vergleiche Leistungsdaten zwischen Spielern</span>
                </div>
              </div>
              <div class="col-auto ms-auto d-print-none">
                <div class="d-flex">
                  <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" type="button">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-inline me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <line x1="12" y1="5" x2="12" y2="19" />
                        <line x1="5" y1="12" x2="19" y2="12" />
                      </svg>
                      Neuer Vergleich
                    </button>
                    <div class="dropdown-menu">
                      <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#modal-new-comparison">Spielervergleich erstellen</a>
                      <a class="dropdown-item" href="#" data-bs-toggle="modal" data-bs-target="#modal-view-history">Vergleichshistorie</a>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END PAGE HEADER -->
        <div class="page-body">
          <div class="container-xl">
            <div class="card">
              <div class="card-header">
                <h3 class="card-title">Spielervergleich</h3>
              </div>
              <div class="card-body">
                <div class="row mb-4">
                  <div class="col-sm-6 col-lg-3 mb-3">
                    <label class="form-label">Spieler 1</label>
                    <select class="form-select" id="player1">
                      <option value="">Bitte wählen...</option>
                      <option value="Finley">Finley</option>
                      <option value="Bent">Bent</option>
                      <option value="Ben">Ben</option>
                      <option value="Alex">Alex</option>
                      <option value="Lion">Lion</option>
                    </select>
                  </div>
                  <div class="col-sm-6 col-lg-3 mb-3">
                    <label class="form-label">Spieler 2</label>
                    <select class="form-select" id="player2">
                      <option value="">Bitte wählen...</option>
                      <option value="Finley">Finley</option>
                      <option value="Bent">Bent</option>
                      <option value="Ben">Ben</option>
                      <option value="Alex">Alex</option>
                      <option value="Lion">Lion</option>
                    </select>
                  </div>
                  <div class="col-sm-6 col-lg-3 mb-3">
                    <label class="form-label">Kategorie</label>
                    <select class="form-select" id="comparison-category">
                      <option value="">Alle Kategorien</option>
                      <option value="Sprint">Sprint</option>
                      <option value="Kraft">Kraft</option>
                      <option value="Ausdauer">Ausdauer</option>
                      <option value="Technik">Technik</option>
                    </select>
                  </div>
                  <div class="col-sm-6 col-lg-3 mb-3 d-flex align-items-end">
                    <button class="btn btn-primary w-100" id="compare-btn">
                      <svg xmlns="http://www.w3.org/2000/svg" class="icon me-1" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                        <polyline points="15 6 21 6 21 12" />
                        <polyline points="9 18 3 18 3 12" />
                        <path d="M21 6l-3 9a5 5 0 0 1 -9 0l-3 -9" />
                      </svg>
                      Vergleichen
                    </button>
                  </div>
                </div>
                
                <div id="comparison-results" style="display: none;">
                  <div class="row">
                    <div class="col-md-6 mb-4">
                      <div class="card">
                        <div class="card-header">
                          <h4 class="card-title" id="radar-title">Leistungsprofil</h4>
                        </div>
                        <div class="card-body">
                          <div id="radar-chart" style="height: 300px;"></div>
                        </div>
                      </div>
                    </div>
                    <div class="col-md-6 mb-4">
                      <div class="card">
                        <div class="card-header">
                          <h4 class="card-title" id="bar-title">Direktvergleich</h4>
                        </div>
                        <div class="card-body">
                          <div id="bar-chart" style="height: 300px;"></div>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="card">
                    <div class="card-header">
                      <h4 class="card-title">Detaillierter Vergleich</h4>
                    </div>
                    <div class="card-body p-0">
                      <div class="table-responsive">
                        <table class="table table-vcenter" id="comparison-table">
                          <thead>
                            <tr>
                              <th>Kategorie</th>
                              <th>Übung</th>
                              <th id="player1-header">Spieler 1</th>
                              <th id="player2-header">Spieler 2</th>
                              <th>Differenz</th>
                            </tr>
                          </thead>
                          <tbody>
                            <!-- Comparison data will be populated by JavaScript -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div id="no-data-message" class="text-center py-5">
                  <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg text-secondary mb-3" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                    <circle cx="12" cy="12" r="9" />
                    <line x1="9" y1="10" x2="9.01" y2="10" />
                    <line x1="15" y1="10" x2="15.01" y2="10" />
                    <path d="M9.5 15.25a3.5 3.5 0 0 1 5 0" />
                  </svg>
                  <h3 class="text-secondary">Wähle zwei Spieler zum Vergleichen</h3>
                  <p class="text-secondary">Wähle aus der Dropdown-Liste zwei Spieler und eine optionale Kategorie, um einen detaillierten Leistungsvergleich zu sehen.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- BEGIN FOOTER -->
      
        <!-- END FOOTER -->
      </div>
    </div>
    <!-- BEGIN PAGE MODALS -->
    <!-- New Comparison Modal -->
    <div class="modal modal-blur fade" id="modal-new-comparison" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Neuer Spielervergleich</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Spieler 1</label>
              <select class="form-select" id="modal-player1">
                <option value="Finley">Finley</option>
                <option value="Bent">Bent</option>
                <option value="Ben">Ben</option>
                <option value="Alex">Alex</option>
                <option value="Lion">Lion</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Spieler 2</label>
              <select class="form-select" id="modal-player2">
                <option value="Finley">Finley</option>
                <option value="Bent">Bent</option>
                <option value="Ben">Ben</option>
                <option value="Alex">Alex</option>
                <option value="Lion">Lion</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Vergleichsname</label>
              <input type="text" class="form-control" id="comparison-name" placeholder="z.B. Saisonvergleich 2025">
            </div>
            <div class="mb-3">
              <label class="form-label">Beschreibung</label>
              <textarea class="form-control" id="comparison-description" rows="3" placeholder="Optionale Beschreibung des Vergleichs"></textarea>
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn btn-link link-secondary" data-bs-dismiss="modal">Abbrechen</a>
            <a href="#" class="btn btn-primary ms-auto" id="save-comparison">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon me-1">
                <path d="M12 5l0 14" />
                <path d="M5 12l14 0" />
              </svg>
              Vergleich erstellen
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- END PAGE MODALS -->
    <!-- BEGIN SCRIPTS -->
    <script src="./libs/apexcharts/dist/apexcharts.min.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/jsvectormap.min.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/maps/world.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/maps/world-merc.js?1740918423" defer></script>
    <script src="./dist/js/tabler.min.js?1740918423" defer></script>
    <script src="./preview/js/demo.min.js?1740918423" defer></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {
        const API_KEY = 'AIzaSyDG2xJ-sK2eGEe4bs7lBRWKqcoEj0h6O0g';
        const SPREADSHEET_ID = '136NX0510MEeGeAxMYErxMGgpo5VZ2ph68eSKMfsUw-E';
        const SHEET_RANGE = 'A:D';
        
        let athleteData = [];
        
        // Initialize Google API
        gapi.load('client', initClient);
        
        function initClient() {
          gapi.client.init({
            apiKey: API_KEY,
            discoveryDocs: ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
          }).then(() => {
            fetchSheetData();
          }, (error) => {
            console.error('Error initializing Google API client:', error);
            showError('Failed to initialize data connection.');
          });
        }
        
        function fetchSheetData() {
          gapi.client.sheets.spreadsheets.values.get({
            spreadsheetId: SPREADSHEET_ID,
            range: SHEET_RANGE,
          }).then((response) => {
            const values = response.result.values;
            if (values && values.length > 0) {
              athleteData = values.slice(1); // Skip header row
            } else {
              console.log('No data found.');
            }
          }, (error) => {
            console.error('Error fetching spreadsheet data:', error);
          });
        }
        
        // Handle comparison button click
        document.getElementById('compare-btn').addEventListener('click', function() {
          const player1 = document.getElementById('player1').value;
          const player2 = document.getElementById('player2').value;
          const category = document.getElementById('comparison-category').value;
          
          if (!player1 || !player2) {
            alert('Bitte wähle zwei Spieler zum Vergleichen aus.');
            return;
          }
          
          if (player1 === player2) {
            alert('Bitte wähle zwei verschiedene Spieler zum Vergleichen aus.');
            return;
          }
          
          // Filter data for selected players
          const player1Data = athleteData.filter(row => row[2] === player1);
          const player2Data = athleteData.filter(row => row[2] === player2);
          
          if (category) {
            player1Data = player1Data.filter(row => row[0] === category);
            player2Data = player2Data.filter(row => row[0] === category);
          }
          
          if (player1Data.length === 0 || player2Data.length === 0) {
            document.getElementById('comparison-results').style.display = 'none';
            document.getElementById('no-data-message').style.display = 'block';
            document.getElementById('no-data-message').innerHTML = `
              <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-lg text-secondary mb-3" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <circle cx="12" cy="12" r="9" />
                <line x1="9" y1="10" x2="9.01" y2="10" />
                <line x1="15" y1="10" x2="15.01" y2="10" />
                <path d="M9.5 15.25a3.5 3.5 0 0 1 5 0" />
              </svg>
              <h3 class="text-secondary">Keine Vergleichsdaten verfügbar</h3>
              <p class="text-secondary">Für die ausgewählten Spieler ${player1} und ${player2} ${category ? 'in der Kategorie ' + category : ''} sind keine vergleichbaren Daten vorhanden.</p>
            `;
            return;
          }
          
          // Show comparison results and hide the message
          document.getElementById('comparison-results').style.display = 'block';
          document.getElementById('no-data-message').style.display = 'none';
          
          // Set player headers
          document.getElementById('player1-header').textContent = player1;
          document.getElementById('player2-header').textContent = player2;
          
          // Create comparison table
          createComparisonTable(player1Data, player2Data);
          
          // Create comparison charts (would implement with ApexCharts)
          createRadarChart(player1Data, player2Data, player1, player2);
          createBarChart(player1Data, player2Data, player1, player2);
        });
        
        function createComparisonTable(player1Data, player2Data) {
          const tableBody = document.querySelector('#comparison-table tbody');
          tableBody.innerHTML = '';
          
          // Get all unique exercises from both players
          const allExercises = [];
          player1Data.forEach(row => {
            if (!allExercises.some(item => item.category === row[0] && item.exercise === row[1])) {
              allExercises.push({ category: row[0], exercise: row[1] });
            }
          });
          
          player2Data.forEach(row => {
            if (!allExercises.some(item => item.category === row[0] && item.exercise === row[1])) {
              allExercises.push({ category: row[0], exercise: row[1] });
            }
          });
          
          // Sort by category and exercise
          allExercises.sort((a, b) => {
            if (a.category === b.category) {
              return a.exercise.localeCompare(b.exercise);
            }
            return a.category.localeCompare(b.category);
          });
          
          // Create table rows for each exercise
          allExercises.forEach(item => {
            const player1Result = player1Data.find(row => row[0] === item.category && row[1] === item.exercise);
            const player2Result = player2Data.find(row => row[0] === item.category && row[1] === item.exercise);
            
            const player1Value = player1Result ? parseFloat(player1Result[3]) : null;
            const player2Value = player2Result ? parseFloat(player2Result[3]) : null;
            
            let difference = null;
            let differenceClass = '';
            let differencePercent = null;
            
            if (player1Value !== null && player2Value !== null) {
              // Calculate absolute difference
              difference = player1Value - player2Value;
              
              // Calculate percentage difference relative to player2's value
              if (player2Value !== 0) {
                // Use Math.abs() to get absolute value of the percentage difference
                differencePercent = (Math.abs(difference / player2Value) * 100).toFixed(1);
              } else if (player1Value !== 0) {
                // Handle division by zero - just show 100% if player1 has value but player2 is 0
                differencePercent = "100.0";
              } else {
                // Both values are 0
                differencePercent = "0.0";
              }
              
              // Only use success color for positive values, keep neutral for negative values
              differenceClass = difference > 0 ? 'text-success' : '';
            }
            
            tableBody.innerHTML += `
              <tr>
                <td>${item.category}</td>
                <td>${item.exercise}</td>
                <td>${player1Value !== null ? player1Value : '-'}</td>
                <td>${player2Value !== null ? player2Value : '-'}</td>
                <td class="${differenceClass}">${differencePercent !== null ? differencePercent + '%' : '-'}</td>
              </tr>
            `;
          });
        }
        
        function createRadarChart(player1Data, player2Data, player1Name, player2Name) {
          // Simplified implementation - in a real app would aggregate by category
          const categories = [...new Set([...player1Data.map(row => row[0]), ...player2Data.map(row => row[0])])];
          
          const player1Scores = categories.map(category => {
            const exercises = player1Data.filter(row => row[0] === category);
            return exercises.length > 0 ? exercises.reduce((sum, row) => sum + parseFloat(row[3]), 0) / exercises.length : 0;
          });
          
          const player2Scores = categories.map(category => {
            const exercises = player2Data.filter(row => row[0] === category);
            return exercises.length > 0 ? exercises.reduce((sum, row) => sum + parseFloat(row[3]), 0) / exercises.length : 0;
          });
          
          // This is a placeholder - in a real implementation, we would create an actual ApexCharts radar chart
          document.getElementById('radar-chart').innerHTML = `<div class="text-center text-secondary pt-5">Radar chart would display here with ${categories.length} categories</div>`;
        }
        
        function createBarChart(player1Data, player2Data, player1Name, player2Name) {
          // Simplified implementation - in a real app would use ApexCharts
          document.getElementById('bar-chart').innerHTML = `<div class="text-center text-secondary pt-5">Bar chart would display here comparing ${player1Name} and ${player2Name}</div>`;
        }
        
        // Theme toggling
        const darkModeToggle = document.getElementById('darkModeToggle');
        const lightModeToggle = document.getElementById('lightModeToggle');

        function setTheme(themeName) {
          document.body.setAttribute('data-bs-theme', themeName);
          localStorage.setItem('tabler-theme', themeName);
        }

        function initTheme() {
          const savedTheme = localStorage.getItem('tabler-theme');
          setTheme(savedTheme || 'dark');
        }

        if (darkModeToggle) {
          darkModeToggle.addEventListener('click', function(e) {
            e.preventDefault();
            setTheme('dark');
          });
        }

        if (lightModeToggle) {
          lightModeToggle.addEventListener('click', function(e) {
            e.preventDefault();
            setTheme('light');
          });
        }

        initTheme();

        // Ripple effect for cards and buttons
        document.querySelectorAll('.card, .btn').forEach(element => {
          element.addEventListener('click', function(e) {
            const ripple = document.createElement('span');
            ripple.className = 'ripple';
            const rect = element.getBoundingClientRect();
            const size = Math.max(rect.width, rect.height);
            ripple.style.width = ripple.style.height = `${size}px`;
            ripple.style.left = `${e.clientX - rect.left - size / 2}px`;
            ripple.style.top = `${e.clientY - rect.top - size / 2}px`;
            element.appendChild(ripple);
            setTimeout(() => ripple.remove(), 600);
          });
        });
      });
      // @formatter:on
    </script>
    <!-- END SCRIPTS -->
  </body>
</html>
