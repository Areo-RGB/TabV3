<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.1.1
* @link https://tab                        <span class="nav-link-title">Finley</span>
                      </a>
                    </li>.io
* Copyright 2018-2025 The Tabler Authors
* Copyright 2018-2025 codecalm.net PaweÅ‚ Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quo-Vadis</title>
    <!-- BEGIN PAGE LEVEL STYLES -->
    <!-- END PAGE LEVEL STYLES -->
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="./dist/css/tabler.min.css?1740918423" rel="stylesheet" />
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PLUGINS STYLES -->
    <link href="./dist/css/tabler-flags.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-socials.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-payments.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-vendors.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-marketing.min.css?1740918423" rel="stylesheet" />
    <!-- END PLUGINS STYLES -->
    <!-- BEGIN DEMO STYLES -->
    <link href="./preview/css/demo.min.css?1740918423" rel="stylesheet" />
    <!-- END DEMO STYLES -->
    <!-- BEGIN CUSTOM FONT -->
    <style>
      @import url("https://rsms.me/inter/inter.css");
    </style>
    <!-- END CUSTOM FONT -->
  </head>
  <body>
    <!-- BEGIN DEMO THEME SCRIPT -->
    <script src="./preview/js/demo-theme.min.js?1740918423"></script>
    <!-- END DEMO THEME SCRIPT -->
    <div class="page">
      <!-- BEGIN NAVBAR  -->
      <header class="navbar navbar-expand-md d-print-none">
        <div class="container-xl">
          <!-- BEGIN NAVBAR TOGGLER -->
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#navbar-menu"
            aria-controls="navbar-menu"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <!-- END NAVBAR TOGGLER -->
          <!-- BEGIN NAVBAR LOGO -->
          <div class="navbar-brand navbar-brand-autodark d-none-navbar-horizontal pe-0 pe-md-3">
            <a href=".">
              <svg xmlns="http://www.w3.org/2000/svg" width="110" height="32" viewBox="0 0 232 68" class="navbar-brand-image">
                <path
                  d="M64.6 16.2C63 9.9 58.1 5 51.8 3.4 40 1.5 28 1.5 16.2 3.4 9.9 5 5 9.9 3.4 16.2 1.5 28 1.5 40 3.4 51.8 5 58.1 9.9 63 16.2 64.6c11.8 1.9 23.8 1.9 35.6 0C58.1 63 63 58.1 64.6 51.8c1.9-11.8 1.9-23.8 0-35.6zM33.3 36.3c-2.8 4.4-6.6 8.2-11.1 11-1.5.9-3.3.9-4.8.1s-2.4-2.3-2.5-4c0-1.7.9-3.3 2.4-4.1 2.3-1.4 4.4-3.2 6.1-5.3-1.8-2.1-3.8-3.8-6.1-5.3-2.3-1.3-3-4.2-1.7-6.4s4.3-2.9 6.5-1.6c4.5 2.8 8.2 6.5 11.1 10.9 1 1.4 1 3.3.1 4.7zM49.2 46H37.8c-2.1 0-3.8-1-3.8-3s1.7-3 3.8-3h11.4c2.1 0 3.8 1 3.8 3s-1.7 3-3.8 3z"
                  fill="#066fd1"
                  style="fill: var(--tblr-primary, #066fd1)"
                />
                <path
                  d="M105.8 46.1c.4 0 .9.2 1.2.6s.6 1 .6 1.7c0 .9-.5 1.6-1.4 2.2s-2 .9-3.2.9c-2 0-3.7-.4-5-1.3s-2-2.6-2-5.4V31.6h-2.2c-.8 0-1.4-.3-1.9-.8s-.9-1.1-.9-1.9c0-.7.3-1.4.8-1.8s1.2-.7 1.9-.7h2.2v-3.1c0-.8.3-1.5.8-2.1s1.3-.8 2.1-.8 1.5.3 2 .8.8 1.3.8 2.1v3.1h3.4c.8 0 1.4.3 1.9.8s.8 1.2.8 1.9-.3 1.4-.8 1.8-1.2.7-1.9.7h-3.4v13c0 .7.2 1.2.5 1.5s.8.5 1.4.5c.3 0 .6-.1 1.1-.2.5-.2.8-.3 1.2-.3zm28-20.7c.8 0 1.5.3 2.1.8.5.5.8 1.2.8 2.1v20.3c0 .8-.3 1.5-.8 2.1-.5.6-1.2.8-2.1.8s-1.5-.3-2-.8-.8-1.2-.8-2.1c-.8.9-1.9 1.7-3.2 2.4-1.3.7-2.8 1-4.3 1-2.2 0-4.2-.6-6-1.7-1.8-1.1-3.2-2.7-4.2-4.7s-1.6-4.3-1.6-6.9c0-2.6.5-4.9 1.5-6.9s2.4-3.6 4.2-4.8c1.8-1.1 3.7-1.7 5.9-1.7 1.5 0 3 .3 4.3.8 1.3.6 2.5 1.3 3.4 2.1 0-.8.3-1.5.8-2.1.5-.5 1.2-.7 2-.7zm-9.7 21.3c2.1 0 3.8-.8 5.1-2.3s2-3.4 2-5.7-.7-4.2-2-5.8c-1.3-1.5-3-2.3-5.1-2.3-2 0-3.7.8-5 2.3-1.3 1.5-2 3.5-2 5.8s.6 4.2 1.9 5.7 3 2.3 5.1 2.3zm32.1-21.3c2.2 0 4.2.6 6 1.7 1.8 1.1 3.2 2.7 4.2 4.7s1.6 4.3 1.6 6.9-.5 4.9-1.5 6.9-2.4 3.6-4.2 4.8c-1.8 1.1-3.7 1.7-5.9 1.7-1.5 0-3-.3-4.3-.9s-2.5-1.4-3.4-2.3v.3c0 .8-.3 1.5-.8 2.1-.5.6-1.2.8-2.1.8s-1.5-.3-2.1-.8c-.5-.5-.8-1.2-.8-2.1V18.9c0-.8.3-1.5.8-2.1.5-.6 1.2-.8 2.1-.8s1.5.3 2.1.8c.5.6.8 1.3.8 2.1v10c.8-1 1.8-1.8 3.2-2.5 1.3-.7 2.8-1 4.3-1zm-.7 21.3c2 0 3.7-.8 5-2.3s2-3.5 2-5.8-.6-4.2-1.9-5.7-3-2.3-5.1-2.3-3.8.8-5.1 2.3-2 3.4-2 5.7.7 4.2 2 5.8c1.3 1.6 3 2.3 5.1 2.3zm23.6 1.9c0 .8-.3 1.5-.8 2.1s-1.3.8-2.1.8-1.5-.3-2-.8-.8-1.3-.8-2.1V18.9c0-.8.3-1.5.8-2.1s1.3-.8 2.1-.8 1.5.3 2 .8.8 1.3.8 2.1v29.7zm29.3-10.5c0 .8-.3 1.4-.9 1.9-.6.5-1.2.7-2 .7h-15.8c.4 1.9 1.3 3.4 2.6 4.4 1.4 1.1 2.9 1.6 4.7 1.6 1.3 0 2.3-.1 3.1-.4.7-.2 1.3-.5 1.8-.8.4-.3.7-.5.9-.6.6-.3 1.1-.4 1.6-.4.7 0 1.2.2 1.7.7s.7 1 .7 1.7c0 .9-.4 1.6-1.3 2.4-.9.7-2.1 1.4-3.6 1.9s-3 .8-4.6.8c-2.7 0-5-.6-7-1.7s-3.5-2.7-4.6-4.6-1.6-4.2-1.6-6.6c0-2.8.6-5.2 1.7-7.2s2.7-3.7 4.6-4.8 3.9-1.7 6-1.7 4.1.6 6 1.7 3.4 2.7 4.5 4.7c.9 1.9 1.5 4.1 1.5 6.3zm-12.2-7.5c-3.7 0-5.9 1.7-6.6 5.2h12.6v-.3c-.1-1.3-.8-2.5-2-3.5s-2.5-1.4-4-1.4zm30.3-5.2c1 0 1.8.3 2.4.8.7.5 1 1.2 1 1.9 0 1-.3 1.7-.8 2.2-.5.5-1.1.8-1.8.7-.5 0-1-.1-1.6-.3-.2-.1-.4-.1-.6-.2-.4-.1-.7-.1-1.1-.1-.8 0-1.6.3-2.4.8s-1.4 1.3-1.9 2.3-.7 2.3-.7 3.7v11.4c0 .8-.3 1.5-.8 2.1-.5.6-1.2.8-2.1.8s-1.5-.3-2.1-.8c-.5-.5-.8-1.2-.8-2.1V28.8c0-.8.3-1.5.8-2.1.5-.6 1.2-.8 2.1-.8s1.5.3 2.1.8c.5.6.8 1.3.8 2.1v.6c.7-1.3 1.8-2.3 3.2-3 1.3-.7 2.8-1 4.3-1z"
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  fill="#4a4a4a"
                />
              </svg>
            </a>
          </div>
          <!-- END NAVBAR LOGO -->
          <div class="navbar-nav flex-row order-md-last">
            <div class="d-none d-md-flex">
              <div class="nav-item">
                <a href="?theme=dark" class="nav-link px-0 hide-theme-dark" title="Enable dark mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
                  <!-- Download SVG icon from http://tabler.io/icons/icon/moon -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="icon icon-1"
                  >
                    <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
                  </svg>
                </a>
                <a href="?theme=light" class="nav-link px-0 hide-theme-light" title="Enable light mode" data-bs-toggle="tooltip" data-bs-placement="bottom">
                  <!-- Download SVG icon from http://tabler.io/icons/icon/sun -->
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    class="icon icon-1"
                  >
                    <path d="M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0" />
                    <path d="M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7" />
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
      </header>
      <header class="navbar-expand-md">
        <div class="collapse navbar-collapse" id="navbar-menu">
          <div class="navbar">
            <div class="container-xl">
              <div class="row flex-fill align-items-center">
                <div class="col">
                  <!-- BEGIN NAVBAR MENU -->
                  <ul class="navbar-nav">
                    <li class="nav-item active">
                      <a class="nav-link" href="./">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <!-- User icon -->
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="icon icon-1"
                          >
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Finley </span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="./bent.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <!-- Download SVG icon from http://tabler.io/icons/icon/user -->
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="24"
                            height="24"
                            viewBox="0 0 24 24"
                            fill="none"
                            stroke="currentColor"
                            stroke-width="2"
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            class="icon icon-1"
                          >
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Bent </span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" href="./alex.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Alex </span>
                      </a>
                    </li>
                  </ul>
                  <!-- END NAVBAR MENU -->
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <!-- END NAVBAR  -->
      <div class="page-wrapper">
        <!-- BEGIN PAGE HEADER -->
        <div class="page-header d-print-none">
          <div class="container-xl">
            <div class="row g-2 align-items-center">
              <div class="col">
                <!-- Page pre-title -->
                <div class="page-pretitle">Overview</div>
                <h2 class="page-title">Dashboard</h2>
              </div>
            </div>
          </div>
        </div>
        <!-- END PAGE HEADER -->
        <!-- BEGIN PAGE BODY -->
        <div class="page-body">
          <div class="container-xl">
            <div class="row row-cards mb-4" id="kpi-container">
              <!-- KPIs will be injected here by JavaScript -->
            </div>
            <div class="row row-cards" id="charts-container">
              <!-- Charts will be injected here by JavaScript -->
            </div>
          </div>
        </div>
        <!-- END PAGE BODY -->
        <!--  BEGIN FOOTER  -->
        <footer class="footer footer-transparent d-print-none">
          <div class="container-xl">
            <div class="row text-center align-items-center flex-row-reverse">
              <div class="col-lg-auto ms-lg-auto">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item"><a href="https://tabler.io/docs" target="_blank" class="link-secondary" rel="noopener">Documentation</a></li>
                  <li class="list-inline-item"><a href="./license.html" class="link-secondary">License</a></li>
                  <li class="list-inline-item">
                    <a href="https://github.com/tabler/tabler" target="_blank" class="link-secondary" rel="noopener">Source code</a>
                  </li>
                  <li class="list-inline-item">
                    <a href="https://github.com/sponsors/codecalm" target="_blank" class="link-secondary" rel="noopener">
                      <!-- Download SVG icon from http://tabler.io/icons/icon/heart -->
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="24"
                        height="24"
                        viewBox="0 0 24 24"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        class="icon text-pink icon-inline icon-4"
                      >
                        <path d="M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572" />
                      </svg>
                      Sponsor
                    </a>
                  </li>
                </ul>
              </div>
              <div class="col-12 col-lg-auto mt-3 mt-lg-0">
                <ul class="list-inline list-inline-dots mb-0">
                  <li class="list-inline-item">
                    Copyright &copy; 2025
                    <a href="." class="link-secondary">Tabler</a>. All rights reserved.
                  </li>
                  <li class="list-inline-item">
                    <a href="./changelog.html" class="link-secondary" rel="noopener"> v1.1.1 </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
        <!--  END FOOTER  -->
      </div>
    </div>
    <!-- BEGIN PAGE MODALS -->
    <div class="modal modal-blur fade" id="modal-report" tabindex="-1" role="dialog" aria-hidden="true">
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">New report</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <div class="mb-3">
              <label class="form-label">Name</label>
              <input type="text" class="form-control" name="example-text-input" placeholder="Your report name" />
            </div>
            <label class="form-label">Report type</label>
            <div class="form-selectgroup-boxes row mb-3">
              <div class="col-lg-6">
                <label class="form-selectgroup-item">
                  <input type="radio" name="report-type" value="1" class="form-selectgroup-input" checked />
                  <span class="form-selectgroup-label d-flex align-items-center p-3">
                    <span class="me-3">
                      <span class="form-selectgroup-check"></span>
                    </span>
                    <span class="form-selectgroup-label-content">
                      <span class="form-selectgroup-title strong mb-1">Simple</span>
                      <span class="d-block text-secondary">Provide only basic data needed for the report</span>
                    </span>
                  </span>
                </label>
              </div>
              <div class="col-lg-6">
                <label class="form-selectgroup-item">
                  <input type="radio" name="report-type" value="1" class="form-selectgroup-input" />
                  <span class="form-selectgroup-label d-flex align-items-center p-3">
                    <span class="me-3">
                      <span class="form-selectgroup-check"></span>
                    </span>
                    <span class="form-selectgroup-label-content">
                      <span class="form-selectgroup-title strong mb-1">Advanced</span>
                      <span class="d-block text-secondary">Insert charts and additional advanced analyses to be inserted in the report</span>
                    </span>
                  </span>
                </label>
              </div>
            </div>
            <div class="row">
              <div class="col-lg-8">
                <div class="mb-3">
                  <label class="form-label">Report url</label>
                  <div class="input-group input-group-flat">
                    <span class="input-group-text"> https://tabler.io/reports/ </span>
                    <input type="text" class="form-control ps-0" value="report-01" autocomplete="off" />
                  </div>
                </div>
              </div>
              <div class="col-lg-4">
                <div class="mb-3">
                  <label class="form-label">Visibility</label>
                  <select class="form-select">
                    <option value="1" selected>Private</option>
                    <option value="2">Public</option>
                    <option value="3">Hidden</option>
                  </select>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-body">
            <div class="row">
              <div class="col-lg-6">
                <div class="mb-3">
                  <label class="form-label">Client name</label>
                  <input type="text" class="form-control" />
                </div>
              </div>
              <div class="col-lg-6">
                <div class="mb-3">
                  <label class="form-label">Reporting period</label>
                  <input type="date" class="form-control" />
                </div>
              </div>
              <div class="col-lg-12">
                <div>
                  <label class="form-label">Additional information</label>
                  <textarea class="form-control" rows="3"></textarea>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <a href="#" class="btn btn-link link-secondary btn-3" data-bs-dismiss="modal"> Cancel </a>
            <a href="#" class="btn btn-primary btn-5 ms-auto" data-bs-dismiss="modal">
              <!-- Download SVG icon from http://tabler.io/icons/icon/plus -->
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="icon icon-2"
              >
                <path d="M12 5l0 14" />
                <path d="M5 12l14 0" />
              </svg>
              Create new report
            </a>
          </div>
        </div>
      </div>
    </div>
    <!-- END PAGE MODALS -->
    <!-- BEGIN PAGE LIBRARIES -->
    <script src="./libs/apexcharts/dist/apexcharts.min.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/jsvectormap.min.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/maps/world.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/maps/world-merc.js?1740918423" defer></script>
    <!-- END PAGE LIBRARIES -->
    <!-- BEGIN GLOBAL MANDATORY SCRIPTS -->
    <script src="./dist/js/tabler.min.js?1740918423" defer></script>
    <!-- END GLOBAL MANDATORY SCRIPTS -->
    <!-- BEGIN DEMO SCRIPTS -->
    <script src="./preview/js/demo.min.js?1740918423" defer></script>
    <!-- END DEMO SCRIPTS -->
    <!-- BEGIN PAGE SCRIPTS -->
    <script>
      // @formatter:off
      document.addEventListener("DOMContentLoaded", function () {

        // Helper function to calculate percentile rank
        function calculatePercentileRank(finleyResult, dfbValues, dfbCategories, exerciseName) {
          // Handle cases where DFB data is missing
          if (!dfbValues || dfbValues.length === 0 || !dfbCategories || dfbCategories.length === 0) {
            // Return default values indicating no rank is available
            const resultDisplay = finleyResult !== undefined && finleyResult !== null ? finleyResult : 'N/A';
            return { rankString: 'Ranking data not available', label: '', resultDisplay: resultDisplay };
          }

          const higherIsBetter = ['YoYo IR1', 'Balljonglieren'].includes(exerciseName); // YoYo IR1 is higher is better
          let percentile = '<' + dfbCategories[0]; // Default if worse than lowest percentile
          let foundRank = false;

          // Iterate from best percentile downwards
          for (let i = dfbCategories.length - 1; i >= 0; i--) {
            const dfbValue = dfbValues[i];
            const dfbPercentile = dfbCategories[i];

            if (higherIsBetter) {
              if (finleyResult >= dfbValue) {
                percentile = dfbPercentile;
                foundRank = true;
                break; // Found the highest percentile Finley meets or exceeds
              }
            } else { // Lower is better
              if (finleyResult <= dfbValue) {
                percentile = dfbPercentile;
                foundRank = true;
                break; // Found the highest percentile Finley meets or exceeds
              }
            }
          }

          // Check if better than the best recorded percentile (only if a rank was found within the range)
          if (foundRank) {
              const bestDfbValue = dfbValues[dfbValues.length - 1];
              const bestDfbPercentile = dfbCategories[dfbCategories.length - 1];
              if (higherIsBetter) {
                  if (finleyResult > bestDfbValue) {
                      percentile = '>' + bestDfbPercentile;
                  }
              } else {
                  if (typeof bestDfbValue !== 'undefined' && finleyResult < bestDfbValue) {
                      percentile = '>' + bestDfbPercentile;
                  }
              }
          } else {
             // If no rank found, it means the result is worse than the lowest percentile recorded
             percentile = '<' + dfbCategories[0];
          }

          let rankString = '';
          let label = '';
          let numericPercentile = 0;

          // Determine the rank string and numeric percentile
          if (percentile.startsWith('>')) {
             // Case 1: Better than the highest recorded percentile
             numericPercentile = parseFloat(percentile.substring(1).replace('%',''));
             rankString = `Better than ${numericPercentile}% of players`;
          } else if (percentile.startsWith('<')) {
             // Case 3: Worse than the lowest recorded percentile
             numericPercentile = 0; // Indicates below threshold
             rankString = `Below the ${dfbCategories[0]} percentile`;
          } else {
             // Case 2: Matched a specific percentile bracket
             numericPercentile = parseFloat(percentile.replace('%',''));
             rankString = `Better than ${numericPercentile}% of players`;
          }

          // Determine the qualitative label based on numeric percentile
          if (numericPercentile >= 97) {
            label = 'Ausgezeichnet';
          } else if (numericPercentile >= 90) {
            label = 'Sehr gut';
          } else if (numericPercentile >= 80) {
            label = 'Gut';
          } else if (numericPercentile >= 30) {
            label = 'Durchschnittlich';
          } else {
            label = 'Unterdurchschnittlich';
          }

          return { rankString, label }; // Return both pieces of info
        }


        const chartData = [
          {
            exercise: "10m Sprint",
            finleyResult: 2.00,
            dfbCategories: ['10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [2.33, 2.28, 2.24, 2.21, 2.18, 2.16, 2.13, 2.10, 2.05, 1.99]
          },
          {
            exercise: "20m Sprint",
            finleyResult: 3.59,
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [4.14, 4.01, 3.93, 3.87, 3.82, 3.78, 3.74, 3.69, 3.64, 3.57, 3.47]
          },
          {
            exercise: "Gewandtheit", // Normalized name
            finleyResult: 7.81,
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [9.66, 9.33, 9.07, 8.90, 8.77, 8.66, 8.54, 8.42, 8.28, 8.11, 7.91]
          },
          {
            exercise: "Dribbling",
            finleyResult: 10.27,
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [14.37, 13.42, 12.84, 12.50, 12.15, 11.90, 11.68, 11.44, 11.16, 10.84, 10.43]
          },
          {
            exercise: "Ballkontrolle",
            finleyResult: 10.82, // Found under U10 category, Name Finley
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [15.29, 13.81, 12.86, 12.28, 11.78, 11.36, 10.99, 10.59, 10.18, 9.66, 9.00]
          },
          {
            exercise: "Balljonglieren", // Normalized name
            finleyResult: 0.00,
            dfbCategories: ['40%', '50%', '60%', '70%', '80%', '90%', '97%'], // Note: DFB starts at 40% for this one
            dfbValues: [1.00, 1.00, 1.00, 1.00, 2.00, 3.00, 6.00]
          },
          {
            exercise: "YoYo IR1",
            finleyResult: 640, // User provided value for Finley
            dfbCategories: [], // No DFB data provided
            dfbValues: []      // No DFB data provided
          }
        ];

        const kpiContainer = document.getElementById('kpi-container');
        const chartsContainer = document.getElementById('charts-container');

        chartData.forEach((data, index) => {
          const chartId = `chart-exercise-${index}`;
          const kpiId = `kpi-exercise-${index}`;

          // Calculate Percentile Rank and Label (or use specific label for YoYo IR1)
          let rankInfo;
          let labelHtml = ''; // Initialize labelHtml

          if (data.exercise === "YoYo IR1") {
            // Manually set label and rank string for YoYo IR1 as requested
            rankInfo = { rankString: 'Ranking data not available', label: 'Unterdurchschnittlich' }; // Use provided label
            labelHtml = `<span class="badge bg-danger-lt ms-2">${rankInfo.label}</span>`; // Use danger color for Unterdurchschnittlich
          } else {
            // Calculate rank for other exercises
            rankInfo = calculatePercentileRank(data.finleyResult, data.dfbValues, data.dfbCategories, data.exercise);
            // Determine badge color and create label HTML if a label exists
            if (rankInfo.label) {
                 let badgeColor = 'secondary'; // Default color
                 if (rankInfo.label === 'Gut') badgeColor = 'info';
                 if (rankInfo.label === 'Sehr gut') badgeColor = 'success';
                 if (rankInfo.label === 'Ausgezeichnet') badgeColor = 'purple'; // Using purple for the top tier
                 if (rankInfo.label === 'Durchschnittlich') badgeColor = 'orange'; // Light orange background
                 if (rankInfo.label === 'Unterdurchschnittlich') badgeColor = 'danger'; // Light red background with darker red text
                 labelHtml = `<span class="badge bg-${badgeColor}-lt ms-2">${rankInfo.label}</span>`;
             }
          }


          // Create KPI Card HTML and append to KPI container
          const kpiColDiv = document.createElement('div');
          kpiColDiv.className = 'col-md-4 mb-3'; // Keep KPI column size

          // Generate the inner HTML for the KPI card (labelHtml is now determined above)
          kpiColDiv.innerHTML = `
            <div class="card" id="${kpiId}">
              <div class="card-body">
                <h3 class="card-title mb-1">${data.exercise}${labelHtml}</h3>
                <p class="text-secondary mb-1">Result: ${data.exercise === 'YoYo IR1' ? data.finleyResult + 'm' : (data.finleyResult?.toFixed(2) ?? 'N/A')}</p>
                <p class="text-secondary mb-0">${rankInfo.rankString}</p>
              </div>
            </div>
          `;
          kpiContainer.appendChild(kpiColDiv);

          // Only create chart elements if the exercise is NOT "YoYo IR1"
          if (data.exercise !== "YoYo IR1") {
            const chartId = `chart-exercise-${index}`; // Define chartId here
            const chartColDiv = document.createElement('div');
            chartColDiv.className = 'col-lg-6 mb-4';
            chartColDiv.innerHTML = `<div class="card"><div class="card-body"><div id="${chartId}"></div></div></div>`;
            chartsContainer.appendChild(chartColDiv);

            // Check if DFB data is actually available for chart rendering
            if (data.dfbValues && data.dfbValues.length > 0 && data.dfbCategories && data.dfbCategories.length > 0) {
              const finleyLineData = data.dfbCategories.map(() => data.finleyResult);
              const options = {
                chart: {
                  type: 'line',
                  height: 350,
                  toolbar: {
                    show: true
                  },
                   zoom: {
                    enabled: false
                  }
                },
                series: [
                  {
                    name: 'DFB Percentile',
                    data: data.dfbValues
                  },
                  {
                    name: 'Finley',
                    data: finleyLineData
                  }
                ],
                xaxis: {
                  categories: data.dfbCategories,
                  title: {
                    text: 'DFB Percentile'
                  }
                },
                yaxis: {
                  title: {
                    text: 'Ergebnis (Lower is better, except Balljonglieren)' // Add note about interpretation
                  },
                  reversed: ['10m Sprint', '20m Sprint', 'Gewandtheit', 'Dribbling', 'Ballkontrolle'].includes(data.exercise) // Reverse axis for time-based exercises
                },
                title: {
                  text: data.exercise,
                  align: 'center'
                },
                stroke: {
                  curve: 'smooth',
                  width: [4, 2] // Thicker line for DFB, thinner for Finley
                },
                markers: {
                  size: 5
                },
                 tooltip: {
                  y: {
                    formatter: function (val) {
                      return val.toFixed(2) // Format tooltip values
                    }
                  }
                },
                legend: {
                  position: 'top',
                  horizontalAlign: 'right',
                  floating: true,
                  offsetY: -25,
                  offsetX: -5
                }
              };

              // Now check if ApexCharts is loaded and render
              if (window.ApexCharts) {
                new ApexCharts(document.querySelector(`#${chartId}`), options).render();
              } else {
                console.error("ApexCharts library not loaded.");
                // Optionally display an error in the chart div as well
                const chartDiv = document.querySelector(`#${chartId}`);
                 if (chartDiv) {
                   chartDiv.innerHTML = '<p class="text-center text-danger">Error: Chart library not loaded.</p>';
                 }
              }
            } else {
              // DFB data is missing for this non-YoYo IR1 exercise, display message
              const chartDiv = document.querySelector(`#${chartId}`);
              if (chartDiv) {
                chartDiv.innerHTML = '<p class="text-center text-muted">Chart data not available for this exercise.</p>';
              }
            }
          }
          // No 'else' needed here, as YoYo IR1 charts are simply skipped
        });

        // --- Keep existing demo charts if needed, or remove them ---
        // Example: Remove the original demo charts if they are no longer needed
        const revenueChart = document.getElementById("chart-revenue-bg");
        if (revenueChart) revenueChart.closest('.col-sm-6')?.remove();
        const clientsChart = document.getElementById("chart-new-clients");
        if (clientsChart) clientsChart.closest('.col-sm-6')?.remove();
        const usersChart = document.getElementById("chart-active-users");
        if (usersChart) usersChart.closest('.col-sm-6')?.remove();
        // Add removals for other demo charts if necessary...
        const mentionsChart = document.getElementById("chart-mentions");
        if (mentionsChart) mentionsChart.closest('.col-lg-12')?.remove(); // Assuming it was in a full-width column
         const mapWorld = document.getElementById("map-world");
        if (mapWorld) mapWorld.closest('.col-lg-8')?.remove(); // Adjust column selector if needed
        const sparklineActivity = document.getElementById("sparkline-activity");
        if (sparklineActivity) sparklineActivity.closest('.col-lg-4')?.remove(); // Adjust column selector if needed
        const devActivity = document.getElementById("chart-development-activity");
         if (devActivity) devActivity.closest('.col-md-6')?.remove(); // Adjust column selector if needed
         // Remove bounce rate charts
         for (let i = 1; i <= 6; i++) {
            const bounceRateChart = document.getElementById(`sparkline-bounce-rate-${i}`);
             if (bounceRateChart) bounceRateChart.closest('tr')?.remove(); // Assuming they were in table rows
         }


      });
      // @formatter:on
    </script>
    <!-- Keep other specific chart scripts if they are still relevant -->
    <!-- Example: Keep map script if map is still displayed elsewhere -->
    <!-- <script> ... map script ... </script> -->
    <!-- END PAGE SCRIPTS -->
  </body>
</html>
