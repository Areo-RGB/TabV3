<!doctype html>
<!--
* Tabler - Premium and Open Source dashboard template with responsive and high quality UI.
* @version 1.1.1
* @link https://tabler.io
* Copyright 2018-2025 The Tabler Authors
* Copyright 2018-2025 codecalm.net Paweł Kuna
* Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
-->
<html lang="en">  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Quo-Vadis</title>
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="./static/Favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="./static/Favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="./static/Favicon/favicon-16x16.png">
    <link rel="manifest" href="./static/Favicon/site.webmanifest">
    <link rel="shortcut icon" href="./static/Favicon/favicon.ico">
    <!-- BEGIN STYLES -->
    <link href="./dist/css/tabler.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-flags.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-socials.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-payments.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-vendors.min.css?1740918423" rel="stylesheet" />
    <link href="./dist/css/tabler-marketing.min.css?1740918423" rel="stylesheet" />
    <link href="./preview/css/demo.min.css?1740918423" rel="stylesheet" />
    <style>
      /* Add drop shadow to cards */
      .card {
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
          transition: box-shadow 0.3s ease;
      }
      .card:hover {
          box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
      }
      /* Hero card styling with blue background */
      #kpi-container .card {
          background-color: #274f9d;
          color: white;
      }
      #kpi-container .card-title {
          color: white;
      }
      #kpi-container .text-secondary {
          color: rgba(255, 255, 255, 0.8) !important;
      }
      /* Main hero card with portrait */
      .page-body .row:first-child .card {
          background-color: #274f9d;
          color: white;
      }
      .page-body .row:first-child .card .subheader {
          color: rgba(255, 255, 255, 0.8);
      }
      /* Ensure badges remain readable on blue background */
      html body .badge.bg-orange-lt {
          background-color: rgba(255, 200, 120, 0.3) !important;
          color: #ff9800 !important;
          font-weight: bold !important;
      }
      html body .badge.bg-danger-lt {
          background-color: rgba(255, 99, 99, 0.2) !important;
          color: #dc3545 !important;
          font-weight: bold !important;
      }
      .badge.bg-info-lt {
          background-color: rgba(23, 162, 184, 0.3) !important;
          color: white !important;
          font-weight: bold;
      }
      .badge.bg-success-lt {
          background-color: rgba(72, 199, 116, 0.5) !important;
          color: white !important;
          font-weight: bold;
      }
      .badge.bg-purple-lt {
          background-color: rgba(72, 199, 116, 0.5) !important;
          color: white !important;
          font-weight: bold;
      }
      .badge.bg-secondary-lt {
          background-color: rgba(108, 117, 125, 0.3) !important;
          color: white !important;
          font-weight: bold;
      }
      @import url("https://rsms.me/inter/inter.css");
    </style>
  </head>
  <body>
    <script src="./preview/js/demo-theme.min.js?1740918423"></script>
    <div class="page">
      <header class="navbar navbar-expand-md d-print-none">
        <div class="container-xl">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </header>
      <header class="navbar-expand-md">
        <div class="collapse navbar-collapse" id="navbar-menu">
          <div class="navbar">
            <div class="container-xl">
              <div class="row flex-fill align-items-center">
                <div class="col">                  <ul class="navbar-nav">
                    <li class="nav-item"> <!-- Übersicht -->
                      <a class="nav-link" href="./index.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                            <path d="M5 12l-2 0l9 -9l9 9l-2 0" />
                            <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
                            <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Übersicht </span>
                      </a>
                    </li>
                    <li class="nav-item"> <!-- Finley -->
                      <a class="nav-link" href="./finley.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Finley </span>
                      </a>
                    </li>                    <li class="nav-item"> <!-- Bent -->
                      <a class="nav-link" href="./bent.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Bent </span>
                      </a>
                    </li>
                    <li class="nav-item active"> <!-- Alex is active -->
                      <a class="nav-link" href="./index.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0" />
                            <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Alex </span>
                      </a>
                    </li>
                    <li class="nav-item"> <!-- Daten -->
                      <a class="nav-link" href="./daten.html">
                        <span class="nav-link-icon d-md-none d-lg-inline-block">
                          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-1">
                            <path d="M4 7v-1a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-1" />
                            <path d="M7 9l4 -4l4 4" />
                            <path d="M12 5l0 9" />
                            <path d="M7 14l4 4l4 -4" />
                          </svg>
                        </span>
                        <span class="nav-link-title"> Daten </span>
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </header>
      <div class="page-wrapper">
        <!-- BEGIN PAGE HEADER -->
        <div class="page-header d-print-none py-2">
          <div class="container-xl">
            <div class="row align-items-center">
              <div class="col">
                <h2 class="page-title mb-0"></h2>
              </div>
            </div>
          </div>
        </div>
        <!-- END PAGE HEADER -->
        <div class="page-body">
          <div class="container-xl">
            <div class="row mb-4">
              <div class="col-md-12">
                <div class="card">                <div class="card-body py-4">
                    <div class="row align-items-center">
                      <div class="col-auto d-flex justify-content-center">
                        <img src="./static/photos/6.png" alt="Alex Portrait" class="rounded-circle" width="120" height="120">
                      </div>
                      <div class="col">                          <div class="text-center">
                          <h2 class="mb-1">Alex</h2>
                          <h3 class="subheader mb-2">Gesamtbewertung</h3>
                          <div class="d-flex flex-column align-items-center justify-content-center">
                            <div class="h1 mb-3" style="font-size: 3rem; font-weight: 600;" id="average-percentile">76</div>
                            <span class="badge bg-orange-lt" style="font-size: 1.2em; padding: 0.5em 0.8em;" id="average-label">Durchschnittlich</span>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- END HERO SECTION WITH PORTRAIT AND GESAMTBEWERTUNG -->
            <div class="row row-cards mb-4" id="kpi-container">
              <!-- KPIs will be injected here by JavaScript -->
            </div>
            <div class="row row-cards" id="charts-container">
              <!-- Charts will be injected here by JavaScript -->
            </div>
          </div>
        </div>
        </div>
        <!-- Footer section... -->
      </div>
    </div>
    <!-- Scripts section -->
    <script src="./libs/apexcharts/dist/apexcharts.min.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/jsvectormap.min.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/maps/world.js?1740918423" defer></script>
    <script src="./libs/jsvectormap/dist/maps/world-merc.js?1740918423" defer></script>
    <script src="./dist/js/tabler.min.js?1740918423" defer></script>
    <script src="./preview/js/demo.min.js?1740918423" defer></script>
    <script>      document.addEventListener("DOMContentLoaded", function () {
        // Helper function to calculate numeric percentile value
        function getNumericPercentile(percentileStr) {
          if (!percentileStr) return 0;
          
          if (percentileStr.startsWith('>')) {
            // Better than highest recorded percentile, use that percentile value
            return parseFloat(percentileStr.substring(1).replace('%',''));
          } else if (percentileStr.startsWith('<')) {
            // Worse than lowest recorded percentile
            return 0;
          } else {
            // Matched a specific percentile bracket
            return parseFloat(percentileStr.replace('%',''));
          }
        }
        
        // Helper function to calculate average percentile across exercises
        function calculateAveragePercentile(chartData) {
          const exercisesToInclude = ['10m Sprint', '20m Sprint', 'Gewandtheit', 'Dribbling', 'YoYo IR1', 'Balljonglieren', 'Ballkontrolle'];
          let totalPercentile = 0;
          let countedExercises = 0;
          
          console.log("Calculating average percentile with data:", chartData);
          
          // Go through all exercises that should be included
          chartData.forEach(data => {
            // In alex.html the result property is named finleyResult, but we're using it for Alex's data
            const playerResult = data.finleyResult;
            
            if (exercisesToInclude.includes(data.exercise)) {
              // Special handling for YoYo IR1 which has no DFB data
              if (data.exercise === "YoYo IR1") {
                // Manually assign a high percentile for YoYo IR1 as it's marked 'Ausgezeichnet'
                console.log(`Exercise: ${data.exercise}, Result: ${playerResult}, Percentile: 97 (manually assigned)`);
                totalPercentile += 97;
                countedExercises++;
              } 
              // Normal handling for other exercises with DFB data
              else if (playerResult !== null && playerResult !== undefined &&
                  data.dfbValues && data.dfbValues.length > 0 && data.dfbCategories && data.dfbCategories.length > 0) {
                
                const rankInfo = calculatePercentileRank(playerResult, data.dfbValues, data.dfbCategories, data.exercise);
                console.log(`Exercise: ${data.exercise}, Result: ${playerResult}, Percentile: ${rankInfo.numericPercentile}`);
                
                if (rankInfo && typeof rankInfo.numericPercentile === 'number') {
                  totalPercentile += rankInfo.numericPercentile;
                  countedExercises++;
                } else {
                  console.log(`Invalid rank info for ${data.exercise}: `, rankInfo);
                }
              } else {
                console.log(`Skipping exercise: ${data.exercise} - missing data`);
              }
            } else {
              console.log(`Exercise not included: ${data.exercise}`);
            }
          });
          
          // Calculate and return average if we have any valid exercises
          if (countedExercises > 0) {
            const avgPercentile = totalPercentile / countedExercises;
            console.log(`Average percentile: ${avgPercentile.toFixed(1)} from ${countedExercises} exercises`);
            return {
              average: avgPercentile.toFixed(1),
              label: getPercentileLabel(avgPercentile)
            };
          } else {
            console.log("WARNING: No exercises had valid data for percentile calculation");
            return { average: 50, label: 'Durchschnittlich' }; // Default to 50 if no data
          }
        }
        
        // Helper to get label based on percentile value
        function getPercentileLabel(percentile) {
          if (percentile >= 97) return 'Ausgezeichnet';
          if (percentile >= 90) return 'Sehr gut';
          if (percentile >= 80) return 'Gut';
          if (percentile >= 30) return 'Durchschnittlich';
          return 'Unterdurchschnittlich';
        }
      
        // Helper function to calculate percentile rank
        function calculatePercentileRank(alexResult, dfbValues, dfbCategories, exerciseName) {
          // Handle cases where DFB data is missing
          if (!dfbValues || dfbValues.length === 0 || !dfbCategories || dfbCategories.length === 0) {
            // Return default values indicating no rank is available
            // Check if a result exists to display it, otherwise show N/A
            const resultDisplay = alexResult !== undefined && alexResult !== null ? alexResult : 'N/A';
            return { rankString: 'Ranking data not available', label: '', resultDisplay: resultDisplay };
          }

          const higherIsBetter = ['YoYo IR1', 'Balljonglieren'].includes(exerciseName); // YoYo IR1 is higher is better
          let percentile = '<' + dfbCategories[0];
          let foundRank = false;

          for (let i = dfbCategories.length - 1; i >= 0; i--) {
            const dfbValue = dfbValues[i];
            const dfbPercentile = dfbCategories[i];

            if (higherIsBetter) {
              if (alexResult >= dfbValue) {
                percentile = dfbPercentile;
                foundRank = true;
                break;
              }
            } else {
              if (alexResult <= dfbValue) {
                percentile = dfbPercentile;
                foundRank = true;
                break;
              }
            }
          }

          if (foundRank) {
            const bestDfbValue = dfbValues[dfbValues.length - 1];
            const bestDfbPercentile = dfbCategories[dfbCategories.length - 1];
            if (higherIsBetter) {
              if (alexResult > bestDfbValue) {
                percentile = '>' + bestDfbPercentile;
              }
            } else {
              if (alexResult < bestDfbValue) {
                percentile = '>' + bestDfbPercentile;
              }
            }
          } else {
            percentile = '<' + dfbCategories[0];
          }

          let rankString = '';
          let label = '';
          let numericPercentile = 0;

          if (percentile.startsWith('>')) {
            numericPercentile = parseFloat(percentile.substring(1).replace('%',''));
            rankString = `Better than ${numericPercentile}% of players`;
          } else if (percentile.startsWith('<')) {
            numericPercentile = 0;
            rankString = `Below the ${dfbCategories[0]} percentile`;
          } else {
            numericPercentile = parseFloat(percentile.replace('%',''));
            rankString = `Better than ${numericPercentile}% of players`;
          }

          if (numericPercentile >= 97) {
            label = 'Ausgezeichnet';
          } else if (numericPercentile >= 90) {
            label = 'Sehr gut';
          } else if (numericPercentile >= 80) {
            label = 'Gut';
          } else if (numericPercentile >= 30) {
            label = 'Durchschnittlich';
          } else {
            label = 'Unterdurchschnittlich';
          }          return { rankString, label, numericPercentile };
        }

        const chartData = [
          {
            exercise: "10m Sprint",
            finleyResult: 2.16,
            dfbCategories: ['10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [2.33, 2.28, 2.24, 2.21, 2.18, 2.16, 2.13, 2.10, 2.05, 1.99]
          },
          {
            exercise: "20m Sprint",
            finleyResult: 3.78,
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [4.14, 4.01, 3.93, 3.87, 3.82, 3.78, 3.74, 3.69, 3.64, 3.57, 3.47]
          },
          {
            exercise: "Gewandtheit",
            finleyResult: 7.39,
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [9.66, 9.33, 9.07, 8.90, 8.77, 8.66, 8.54, 8.42, 8.28, 8.11, 7.91]
          },
          {
            exercise: "Dribbling",
            finleyResult: 10.00,
            dfbCategories: ['3%', '10%', '20%', '30%', '40%', '50%', '60%', '70%', '80%', '90%', '97%'],
            dfbValues: [14.37, 13.42, 12.84, 12.50, 12.15, 11.90, 11.68, 11.44, 11.16, 10.84, 10.43]
          },
          {
            exercise: "YoYo IR1",
            finleyResult: 1720, // User provided value
            dfbCategories: [], // No DFB data provided
            dfbValues: []      // No DFB data provided
          }
        ];        const kpiContainer = document.getElementById('kpi-container');
        const chartsContainer = document.getElementById('charts-container');
          // Calculate average percentile across specified exercises
        const averagePercentileInfo = calculateAveragePercentile(chartData);
          // Update the existing Gesamtbewertung values in the hero section
        const averagePercentileElement = document.getElementById('average-percentile');
        const averageLabelElement = document.getElementById('average-label');
        
        if (averagePercentileElement) {
          averagePercentileElement.textContent = Math.ceil(parseFloat(averagePercentileInfo.average));
        }
        
        if (averageLabelElement) {
          averageLabelElement.textContent = averagePercentileInfo.label;
          
          // Update badge color based on label
          averageLabelElement.className = ''; // Reset classes
          let badgeClass = 'badge ';
          if (averagePercentileInfo.label === 'Gut') badgeClass += 'bg-info-lt';
          else if (averagePercentileInfo.label === 'Sehr gut') badgeClass += 'bg-success-lt';
          else if (averagePercentileInfo.label === 'Ausgezeichnet') badgeClass += 'bg-success-lt';
          else if (averagePercentileInfo.label === 'Durchschnittlich') badgeClass += 'bg-orange-lt';
          else if (averagePercentileInfo.label === 'Unterdurchschnittlich') badgeClass += 'bg-danger-lt';
          else badgeClass += 'bg-secondary-lt';
          
          averageLabelElement.className = badgeClass;
          averageLabelElement.style.fontSize = '1.2em';
          averageLabelElement.style.padding = '0.5em 0.8em';
        }
        
        chartData.forEach((data, index) => {
          const chartId = `chart-exercise-${index}`;
          const kpiId = `kpi-exercise-${index}`;

          // Calculate Percentile Rank and Label (or use specific label for YoYo IR1)
          let rankInfo;
          let labelHtml = ''; // Initialize labelHtml

          if (data.exercise === "YoYo IR1") {
            // Manually set label and rank string for YoYo IR1 as requested
            rankInfo = { rankString: 'Ranking data not available', label: 'Ausgezeichnet' }; // Use provided label
            labelHtml = `<span class="badge bg-success-lt ms-2">${rankInfo.label}</span>`; // Use green color for Ausgezeichnet
          } else {
             // Calculate rank for other exercises
            rankInfo = calculatePercentileRank(data.finleyResult, data.dfbValues, data.dfbCategories, data.exercise);
             // Determine badge color and create label HTML if a label exists
            if (rankInfo.label) {
              let badgeColor = 'secondary';
              if (rankInfo.label === 'Gut') badgeColor = 'info';
              if (rankInfo.label === 'Sehr gut') badgeColor = 'success';
              if (rankInfo.label === 'Ausgezeichnet') badgeColor = 'success';
              if (rankInfo.label === 'Durchschnittlich') badgeColor = 'orange';
              if (rankInfo.label === 'Unterdurchschnittlich') badgeColor = 'danger';
              labelHtml = `<span class="badge bg-${badgeColor}-lt ms-2">${rankInfo.label}</span>`;
            }
          }

          const kpiColDiv = document.createElement('div');
          kpiColDiv.className = 'col-md-4 mb-3';

          // Generate the inner HTML for the KPI card (labelHtml is now determined above)
          kpiColDiv.innerHTML = `
            <div class="card" id="${kpiId}">
              <div class="card-body">
                <h3 class="card-title mb-1">${data.exercise}${labelHtml}</h3>
                <p class="text-secondary mb-1">Result: ${data.exercise === 'YoYo IR1' ? data.finleyResult + 'm' : (data.finleyResult?.toFixed(2) ?? 'N/A')}</p>
                <p class="text-secondary mb-0">${rankInfo.rankString}</p>
              </div>
            </div>
          `;
          kpiContainer.appendChild(kpiColDiv);

          // Only create chart elements if the exercise is NOT "YoYo IR1"
          if (data.exercise !== "YoYo IR1") {
            const chartColDiv = document.createElement('div');
            chartColDiv.className = 'col-lg-6 mb-4';
            chartColDiv.innerHTML = `<div class="card" style="background-color: #274f9d;"><div class="card-body"><div id="${chartId}"></div><style>.apexcharts-text, .apexcharts-title-text, .apexcharts-legend-text, .apexcharts-xaxis-label, .apexcharts-yaxis-label { fill: white !important; color: white !important; } .apexcharts-gridline, .apexcharts-xaxis-tick { stroke: rgba(255, 255, 255, 0.2) !important; } .card-title { color: white !important; }</style></div></div>`;
            chartsContainer.appendChild(chartColDiv);

            // Create a single data point for the player's result
            const playerName = "Alex"; // Since Alex is the active page

            // Create consolidated array with both DFB values and player's result
            const higherIsBetter = ['Balljonglieren'].includes(data.exercise);
            
            // Create arrays for values and categories
            let allValues = [];
            let allCategories = [];
            
            // Add player's result first, ensuring proper decimal precision
            allValues.push(data.exercise === 'Balljonglieren' ? Math.round(data.finleyResult) : parseFloat(data.finleyResult.toFixed(2)));
            allCategories.push(playerName);
            
            // Then add all DFB percentile values with proper decimal precision
            data.dfbValues.forEach((value, index) => {
              allValues.push(data.exercise === 'Balljonglieren' ? Math.round(value) : parseFloat(value.toFixed(2)));
              allCategories.push(data.dfbCategories[index]);
            });
            
            // Sort the arrays based on the values
            const combinedData = allValues.map((value, index) => {
              return { value: value, category: allCategories[index] };
            });
            
            // Sort by value (ascending or descending based on the exercise)
            combinedData.sort((a, b) => {
              if (higherIsBetter) {
                // For higher is better exercises, sort descending (highest first)
                return b.value - a.value;
              } else {
                // For lower is better exercises, sort ascending (lowest first)
                return a.value - b.value;
              }
            });
            
            // Find the index of the player in the sorted array
            const playerIndex = combinedData.findIndex(item => item.category === playerName);
            
            // Extract sorted arrays
            allValues = combinedData.map(item => item.value);
            allCategories = combinedData.map(item => item.category);
            
            const options = {
              chart: {
                type: 'bar',
                height: 350,
                toolbar: { show: true },
                zoom: { enabled: false }
              },
              plotOptions: {
                bar: {
                  horizontal: true, // Using horizontal bars
                  dataLabels: {
                    position: 'top',
                  },
                }
              },
              series: [
                {
                  name: 'Results',
                  data: allValues,
                  // Color function to highlight the player's bar
                  color: function(opts) {
                    return opts.dataPointIndex === playerIndex ? '#2196F3' : '#A0A0A0';
                  }
                }
              ],
              xaxis: {
                categories: allCategories,
                title: { text: 'Performance Results' },
                min: 0, // Start x-axis at 0
                max: Math.max(...allValues) * 1.1, // Set max to slightly higher than the highest value
              },              yaxis: {
                title: { 
                  text: data.exercise === 'Balljonglieren' ? 'Count' : 'Time (s)'
                },
                reversed: false, // Always false to keep best performance at the top
                opposite: false, // This places the y-axis on the left side
                labels: {
                  align: 'left'
                }
              },
              title: { text: data.exercise, align: 'center' },
              dataLabels: {
                enabled: true,
                formatter: function (val) {
                  return data.exercise === 'Balljonglieren' ? Math.round(val) : val.toFixed(2);
                },
                textAnchor: 'middle', // Center-align text
                offsetX: -30, // Move labels closer to the center of the bar
                style: {
                  colors: ['#FFFFFF'], // Use white text for all bars
                  fontSize: '13px',
                  fontWeight: 700
                },
                background: {
                  enabled: false // No background
                },
                position: 'center', // Position in center of bar
                distributed: true, // Enable per-datapoint formatting
                align: 'center' // Align centered within the bar
              },
            tooltip: {
              y: {
                formatter: function (val) {
                  return val.toFixed(2)
                }
              }
            },
            legend: {
              position: 'top',
              horizontalAlign: 'right',
              floating: true,
              offsetY: -25,
              offsetX: -5
            }
          };

          // Only render chart if DFB data is available and ApexCharts is loaded
          if (window.ApexCharts && data.dfbValues && data.dfbValues.length > 0 && data.dfbCategories && data.dfbCategories.length > 0) {
            new ApexCharts(document.querySelector(`#${chartId}`), options).render();
          } else if (!window.ApexCharts) {
            console.error("ApexCharts library not loaded.");
          } else {
            // Display a message if chart cannot be rendered due to missing data
            const chartDiv = document.querySelector(`#${chartId}`);
            if (chartDiv) {
              chartDiv.innerHTML = '<p class="text-center" style="color: rgba(255, 255, 255, 0.8);">Chart data not available for this exercise.</p>';
            }
          }
          // End of conditional chart creation
          }
        });

        const revenueChart = document.getElementById("chart-revenue-bg");
        if (revenueChart) revenueChart.closest('.col-sm-6')?.remove();
        const clientsChart = document.getElementById("chart-new-clients");
        if (clientsChart) clientsChart.closest('.col-sm-6')?.remove();
        const usersChart = document.getElementById("chart-active-users");
        if (usersChart) usersChart.closest('.col-sm-6')?.remove();
        const mentionsChart = document.getElementById("chart-mentions");
        if (mentionsChart) mentionsChart.closest('.col-lg-12')?.remove();
        const mapWorld = document.getElementById("map-world");
        if (mapWorld) mapWorld.closest('.col-lg-8')?.remove();
        const sparklineActivity = document.getElementById("sparkline-activity");
        if (sparklineActivity) sparklineActivity.closest('.col-lg-4')?.remove();
        const devActivity = document.getElementById("chart-development-activity");
        if (devActivity) devActivity.closest('.col-md-6')?.remove();
        for (let i = 1; i <= 6; i++) {
          const bounceRateChart = document.getElementById(`sparkline-bounce-rate-${i}`);
          if (bounceRateChart) bounceRateChart.closest('tr')?.remove();
        }
      });
    </script>
  </body>
</html>
